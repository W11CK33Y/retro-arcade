<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêç Snake | Retro Arcade</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body {
  font-family: 'Press Start 2P', monospace;
  background: radial-gradient(circle at center, #1a0028 0%, #080010 80%);
  color: #d78aff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  overflow: hidden;
  text-align: center;
  position: relative;
}

h1 {
  font-size: 1.4rem;
  text-shadow: 0 0 10px #d78aff, 0 0 20px #a84aff;
  margin-bottom: 5px;
}

canvas {
  border: 3px solid #d78aff;
  background: #12001d;
  box-shadow: 0 0 20px #a84aff, 0 0 40px #8a2be2;
}

#scoreboard {
  margin: 10px 0;
  font-size: 0.7rem;
  display: flex;
  justify-content: space-around;
  width: 240px;
  text-shadow: 0 0 8px #d78aff;
}

button {
  margin: 10px 0;
  background: transparent;
  border: 2px solid #d78aff;
  color: #d78aff;
  padding: 0.7rem 1.5rem;
  cursor: pointer;
  font-family: inherit;
  text-shadow: 0 0 8px #d78aff;
  transition: all 0.2s ease;
}

button:hover {
  background: #d78aff;
  color: #1a0028;
  box-shadow: 0 0 20px #d78aff, 0 0 40px #8a2be2;
  transform: scale(1.05);
}

footer {
  font-size: 0.7rem;
  color: #d78affaa;
  margin-top: 5px;
}

.scanlines {
  position: absolute;
  top:0; left:0; width:100%; height:100%;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.03),
    rgba(255,255,255,0.03) 1px,
    transparent 2px,
    transparent 3px
  );
  pointer-events: none;
  z-index: 10;
}
</style>
</head>
<body>
<div class="scanlines"></div>
<h1>üêç Snake</h1>

<div id="scoreboard">
  <div>Score: <span id="score">0</span></div>
  <div>High: <span id="highscore">0</span></div>
</div>

<button id="themeBtn">üé® Change Theme</button>
<canvas id="snake" width="240" height="400"></canvas>
<footer>‚Üê ‚Üí ‚Üë ‚Üì Move | Swipe on mobile!</footer>

<script>
// ---------- Themes ----------
const themes = [
  { bodyBg:"#080010", text:"#d78aff", glow:"#a84aff", snake:"#d78aff", food:"#ff66cc", bgColor:"#12001d" },
  { bodyBg:"#000800", text:"#00ff88", glow:"#00ffaa", snake:"#00ff88", food:"#33ff66", bgColor:"#001100" },
  { bodyBg:"#100008", text:"#ff00aa", glow:"#ff66cc", snake:"#ff00aa", food:"#ff3399", bgColor:"#1a0011" }
];

let currentTheme = parseInt(localStorage.getItem("retroTheme")) || 0;
const themeBtn = document.getElementById("themeBtn");
themeBtn.addEventListener("click", ()=>{
  currentTheme = (currentTheme+1)%themes.length;
  localStorage.setItem("retroTheme", currentTheme);
  applyTheme(themes[currentTheme]);
});

function applyTheme(theme){
  document.body.style.background = theme.bodyBg;
  document.body.style.color = theme.text;
  document.querySelector("h1").style.textShadow = `0 0 10px ${theme.text},0 0 20px ${theme.glow}`;
  canvas.style.border = `3px solid ${theme.text}`;
}
applyTheme(themes[currentTheme]);

// ---------- Snake Game ----------
const canvas = document.getElementById("snake");
const ctx = canvas.getContext("2d");
const ROW = 20, COL = 12, SQ = 20;

let snake = [{x:5, y:8}];
let dir = {x:1, y:0}; // start moving right immediately
let food = {x:Math.floor(Math.random()*COL), y:Math.floor(Math.random()*ROW)};
let score = 0;
let highscore = localStorage.getItem("retro_snake_highscore") || 0;
document.getElementById("highscore").textContent = highscore;
let gameIsOver = false;

function drawSquare(x,y,color){
  ctx.fillStyle=color;
  ctx.fillRect(x*SQ,y*SQ,SQ,SQ);
  ctx.strokeStyle="#2a003f";
  ctx.strokeRect(x*SQ,y*SQ,SQ,SQ);
}

function drawBoard(){
  // Clear board
  ctx.fillStyle = themes[currentTheme].bgColor;
  ctx.fillRect(0,0,COL*SQ,ROW*SQ);
  // Draw snake
  snake.forEach(segment=> drawSquare(segment.x, segment.y, themes[currentTheme].snake));
  // Draw food
  drawSquare(food.x, food.y, themes[currentTheme].food);
}

function updateSnake(){
  const head = {x:snake[0].x+dir.x, y:snake[0].y+dir.y};

  // Check collisions
  if(head.x<0||head.x>=COL||head.y<0||head.y>=ROW||snake.some(seg=>seg.x===head.x && seg.y===head.y)){
    gameOver();
    return;
  }

  snake.unshift(head);

  if(head.x===food.x && head.y===food.y){
    score+=10;
    document.getElementById("score").textContent=score;
    if(score>highscore){highscore=score; localStorage.setItem("retro_snake_highscore",highscore); document.getElementById("highscore").textContent=highscore;}
    placeFood();
  }else{
    snake.pop();
  }
}

function placeFood(){
  let valid = false;
  while(!valid){
    food = {x:Math.floor(Math.random()*COL), y:Math.floor(Math.random()*ROW)};
    valid = !snake.some(seg=>seg.x===food.x && seg.y===food.y);
  }
}

// ---------- Controls ----------
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowLeft" && dir.x!==1) dir={x:-1,y:0};
  else if(e.key==="ArrowRight" && dir.x!==-1) dir={x:1,y:0};
  else if(e.key==="ArrowUp" && dir.y!==1) dir={x:0,y:-1};
  else if(e.key==="ArrowDown" && dir.y!==-1) dir={x:0,y:1};
});

// Mobile swipe
let touchStartX=0, touchStartY=0;
canvas.addEventListener("touchstart", e=>{touchStartX=e.touches[0].clientX; touchStartY=e.touches[0].clientY;}, false);
canvas.addEventListener("touchend", e=>{
  let dx=e.changedTouches[0].clientX-touchStartX;
  let dy=e.changedTouches[0].clientY-touchStartY;
  if(Math.abs(dx)>Math.abs(dy)){
    if(dx>30 && dir.x!==-1) dir={x:1,y:0};
    else if(dx<-30 && dir.x!==1) dir={x:-1,y:0};
  }else{
    if(dy>30 && dir.y!==-1) dir={x:0,y:1};
    else if(dy<-30 && dir.y!==1) dir={x:0,y:-1};
  }
}, false);

// ---------- Game Loop ----------
function gameLoop(){
  if(gameIsOver) return;
  updateSnake();
  drawBoard();
  setTimeout(gameLoop, 150);
}

gameLoop();

function gameOver(){
  gameIsOver = true;
  alert("Game Over!");
  location.reload();
}
</script>
</body>
</html>
