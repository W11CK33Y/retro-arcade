
<!DOCTYPE html>
<html lang="en">
<head>
<script src="js/theme.js"></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêç Snake | Retro Arcade</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body {
  font-family: 'Press Start 2P', monospace;
  background: radial-gradient(circle at center, #1a0028 0%, #080010 80%);
  color: #d78aff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  text-align: center;
  overflow: hidden;
  position: relative;
}

h1 {
  font-size: 1.4rem;
  text-shadow: 0 0 10px #d78aff, 0 0 25px #a84aff;
  margin-bottom: 5px;
}

#scoreboard {
  margin-bottom: 10px;
  font-size: 0.7rem;
  display: flex;
  justify-content: space-around;
  width: 240px;
  text-shadow: 0 0 8px #d78aff;
}

canvas {
  border: 3px solid #d78aff;
  box-shadow: 0 0 20px #a84aff, 0 0 40px #8a2be2;
  background: #12001d;
}

button {
  margin-bottom: 12px;
  background: transparent;
  border: 2px solid #d78aff;
  color: #d78aff;
  padding: 0.7rem 1.5rem;
  font-size: 0.8rem;
  font-family: inherit;
  text-shadow: 0 0 8px #d78aff;
  cursor: pointer;
  transition: all 0.2s ease;
}

button:hover {
  background: #d78aff;
  color: #1a0028;
  box-shadow: 0 0 20px #d78aff, 0 0 40px #8a2be2;
  transform: scale(1.05);
}

.scanlines {
  position: absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.03),
    rgba(255, 255, 255, 0.03) 1px,
    transparent 2px,
    transparent 3px
  );
  pointer-events: none;
  z-index: 10;
}
</style>
</head>
<body>
<div class="scanlines"></div>
<h1>üêç Snake</h1>

<div id="scoreboard">
  <div>Score: <span id="score">0</span></div>
  <div>High: <span id="highscore">0</span></div>
</div>

<button id="themeBtn">üé® Change Theme</button>
<canvas id="snake" width="400" height="400"></canvas>

<script>
const canvas = document.getElementById("snake");
const ctx = canvas.getContext("2d");
const box = 20;

// Themes
const themes = [
  { bodyBg:"radial-gradient(circle at center, #1a0028 0%, #080010 80%)",
    text:"#d78aff", glow:"#a84aff",
    canvasBorder:"#d78aff", canvasBg:"#12001d",
    snakeColor:"#d78aff", foodColor:"#a84aff" },
  { bodyBg:"radial-gradient(circle at center, #001a00 0%, #000800 80%)",
    text:"#00ff88", glow:"#00ffaa",
    canvasBorder:"#00ff88", canvasBg:"#001100",
    snakeColor:"#00ff88", foodColor:"#00ffaa" },
  { bodyBg:"radial-gradient(circle at center, #2a001a 0%, #100008 80%)",
    text:"#ff00aa", glow:"#ff66cc",
    canvasBorder:"#ff00aa", canvasBg:"#1a0011",
    snakeColor:"#ff00aa", foodColor:"#ff66cc" }
];

// Persistent theme
let currentTheme = parseInt(localStorage.getItem("retroTheme")) || 0;

// Apply theme function
function applyTheme(theme){
  document.body.style.background = theme.bodyBg;
  document.body.style.color = theme.text;
  document.querySelector("h1").style.textShadow = `0 0 10px ${theme.text}, 0 0 25px ${theme.glow}`;
  canvas.style.border = `3px solid ${theme.canvasBorder}`;
  canvas.style.background = theme.canvasBg;
  drawSnake();
  drawFood();
}

// Theme button
document.getElementById("themeBtn").addEventListener("click", ()=>{
  currentTheme = (currentTheme+1)%themes.length;
  localStorage.setItem("retroTheme", currentTheme);
  applyTheme(themes[currentTheme]);
});

// Game variables
let snake = [{x: 9*box, y: 10*box}];
let direction = null;
let food = {x: Math.floor(Math.random()*20)*box, y: Math.floor(Math.random()*20)*box};
let score = 0;
let highscore = localStorage.getItem("snakeHighscore") || 0;
document.getElementById("highscore").textContent = highscore;

// Draw functions
function drawSquare(x,y,color){ctx.fillStyle=color;ctx.fillRect(x,y,box,box);}
function drawSnake(){ctx.clearRect(0,0,canvas.width,canvas.height);snake.forEach(s=>drawSquare(s.x,s.y,themes[currentTheme].snakeColor));}
function drawFood(){drawSquare(food.x,food.y,themes[currentTheme].foodColor);}

// Controls
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowLeft" && direction!="RIGHT") direction="LEFT";
  else if(e.key==="ArrowUp" && direction!="DOWN") direction="UP";
  else if(e.key==="ArrowRight" && direction!="LEFT") direction="RIGHT";
  else if(e.key==="ArrowDown" && direction!="UP") direction="DOWN";
});

// Game loop
function update(){
  let head = {x: snake[0].x, y: snake[0].y};
  if(direction==="LEFT") head.x -= box;
  if(direction==="RIGHT") head.x += box;
  if(direction==="UP") head.y -= box;
  if(direction==="DOWN") head.y += box;

  // Wrap around screen
  if(head.x >= canvas.width) head.x=0;
  if(head.x<0) head.x=canvas.width-box;
  if(head.y>=canvas.height) head.y=0;
  if(head.y<0) head.y=canvas.height-box;

  // Check collision with self
  for(let i=0;i<snake.length;i++){
    if(head.x===snake[i].x && head.y===snake[i].y){
      alert("Game Over!");
      if(score>highscore){localStorage.setItem("snakeHighscore",score);}
      document.location.reload();
    }
  }

  snake.unshift(head);

  // Eat food
  if(head.x===food.x && head.y===food.y){
    score+=1;
    document.getElementById("score").textContent = score;
    food = {x: Math.floor(Math.random()*20)*box, y: Math.floor(Math.random()*20)*box};
  }else snake.pop();

  drawSnake();
  drawFood();
}

// Initialize
applyTheme(themes[currentTheme]);
setInterval(update,150);
</script>
</body>
</html>
